<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <th:block th:include="include :: header('首页')"/>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="../../admin/css/other/home.css"/>
</head>
<body class="pear-container">
<div>
    <div class="layui-row layui-col-space10">
        <div class="layui-col-md9">
            <div class="layui-row layui-col-space10">
                <!-- 快捷菜单 -->
                <div class="layui-col-md6">
                    <div class="layui-card">
                        <div class="layui-card-header">
                            快捷菜单
                        </div>
                        <div class="layui-card-body">
                            <div class="layui-row layui-col-space10">
                                <div class="layui-col-md3 layui-col-sm3 layui-col-xs3 layui-center"
                                     th:each="menu:${systemInfo.menus}">
                                    <div class="pear-card"
                                         th:attr="data-id=${menu.id},data-title=${menu.title},data-url=${menu.href}">
                                        <i th:class="'layui-icon ' + ${menu.icon}"></i>
                                    </div>
                                    <span class="pear-card-title" th:text="${menu.title}">主页</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="layui-col-md6">
                    <div class="layui-card">
                        <div class="layui-card-header">
                            代办任务
                        </div>
                        <div class="layui-card-body">
                            <div class="layui-row layui-col-space10">
                                <div class="layui-col-md6 layui-col-sm6 layui-col-xs6">
                                    <div class="pear-card2">
                                        <div class="title">待审评论</div>
                                        <div class="count pear-text">21</div>
                                    </div>
                                </div>
                                <div class="layui-col-md6 layui-col-sm6 layui-col-xs6">
                                    <div class="pear-card2">
                                        <div class="title">待审帖子</div>
                                        <div class="count pear-text">32</div>
                                    </div>
                                </div>
                                <div class="layui-col-md6 layui-col-sm6 layui-col-xs6">
                                    <div class="pear-card2">
                                        <div class="title">待审文章</div>
                                        <div class="count pear-text">14</div>
                                    </div>
                                </div>
                                <div class="layui-col-md6 layui-col-sm6 layui-col-xs6">
                                    <div class="pear-card2">
                                        <div class="title">待审用户</div>
                                        <div class="count pear-text">63</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="layui-col-md12">
                    <div class="layui-card">
                        <iframe frameborder="0" width="100%" height="580" scrolling="yes"
                                src="https://rili-d.jin10.com/open.php?fontSize=14px&theme=primary"></iframe>
                    </div>
                </div>
            </div>
        </div>
        <!-- 公告栏 -->
        <div class="layui-col-md3">
            <div id="systemNotice" class="layui-card" style="height: 259px">
                <div class="layui-card-header"><i class="layui-icon layui-icon-speaker" style="color:red;"></i>系统公告
                </div>
                <div class="layui-card-body">
                    <ul class="list" th:each="noticeInfo:${noticeInfo.noticeInfos}">
                        <li class="list-item" th:value="${noticeInfo.id}">
                            <!--                            <span th:value="${noticeInfo.id}" style="display: none;"></span>-->
                            <span class="title" th:text="${noticeInfo.title}">公告标题</span>&emsp;
                            <span class="layui-badge" th:if="${noticeInfo.top} == 1">置顶</span>
                            <span class="footer" th:text="${noticeInfo.createTime}">2022-01-01</span>
                        </li>
                    </ul>
                </div>
            </div>
            <!-- 今日运势 -->
            <div class="layui-card">
                <div class="layui-card-header"><i class="layui-icon layui-icon-star" style="color:orange;"></i> 今日运势
                </div>
                <div class="layui-card-body layui-text">
                    <div id="echarts-today-luck" style="width: 100%;min-height:320px"></div>
                </div>
            </div>
            <div class="layui-card">
                <div class="layui-card-header"><i class="layui-icon layui-icon-face-smile-b"
                                                  style="color:deepskyblue;"></i>
                    今日寄语
                </div>
                <div class="layui-card-body" style="line-height:40px;" th:text="${systemInfo.todayTip}">
                </div>
            </div>
            <!-- 系统信息说明 -->
            <div class="layui-card">
                <div class="layui-card-header"><i class="layui-icon layui-icon-about" style="color:grey;"></i>
                    系统信息
                </div>
                <div class="layui-card-body layui-text">
                    <table class="layui-table">
                        <colgroup>
                            <col width="100">
                            <col>
                        </colgroup>
                        <tbody>
                        <tr>
                            <td>系统名称</td>
                            <td th:text="${systemInfo.systemTitle}">
                                橘子管理系统
                            </td>
                        </tr>
                        <tr>
                            <td>当前版本</td>
                            <td th:text="${systemInfo.version}">v0.0.1</td>
                        </tr>
                        <tr>
                            <td>当前系统</td>
                            <td th:text="${systemInfo.osName}">
                            </td>
                        </tr>
                        <tr>
                            <td>Github</td>
                            <td style="padding-bottom: 0;">
                                <div class="layui-btn-container">
                                    <iframe src="https://ghbtns.com/github-btn.html?user=TangerineSpecter&repo=OrangeManageSystem&type=star&count=true"
                                            frameborder="0" scrolling="0" width="100px" height="20px"></iframe>
                                    <iframe src="https://ghbtns.com/github-btn.html?user=TangerineSpecter&repo=OrangeManageSystem&type=fork&count=true"
                                            frameborder="0" scrolling="0" width="100px" height="20px"></iframe>
                                </div>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
<th:block th:include="include :: footer"/>
<script th:inline="javascript">

    layui.use(['layer', 'echarts', 'element', 'count'], function () {
        const $ = layui.jquery,
            layer = layui.layer,
            element = layui.element,
            count = layui.count,
            echarts = layui.echarts;

        //点击跳转
        $("body").on("click", "[data-url]", function () {
            console.log("click")
            parent.layui.tab.addTabOnlyByElem("content", {
                id: $(this).attr("data-id"),
                title: $(this).attr("data-title"),
                url: $(this).attr("data-url"),
                close: true
            })
        })

        /**
         * 今日运势图表
         */
        const echartsTodayLuck = echarts.init(document.getElementById('echarts-today-luck'), 'walden');

        /**
         * 今日运势初始化
         */
        const starName = [[${systemInfo.starName}]];
        const allLuck = [[${systemInfo.allLuck}]];
        const workLuck = [[${systemInfo.workLuck}]];
        const love = [[${systemInfo.love}]];
        const health = [[${systemInfo.health}]];
        const money = [[${systemInfo.money}]];
        //综合运势、爱情、工作、健康、金钱
        const data = [allLuck, love, workLuck, health, money];

        //今日运势
        const luckOption = {
            tooltip: {
                trigger: 'axis'
            },
            legend: {
                left: 'center'
            },
            radar: [
                {
                    indicator: [
                        {text: '综合运势', max: 100},
                        {text: '爱情运势', max: 100},
                        {text: '工作运势', max: 100},
                        {text: '健康运势', max: 100},
                        {text: '金钱运势', max: 100}
                    ],
                    center: ['50%', '50%'],
                    radius: 100
                }
            ],
            animations: {
                enabled: true,
                easing: 'easeinout',
                speed: 800,
                animateGradually: {
                    enabled: true,
                    delay: 150
                },
                dynamicAnimation: {
                    enabled: true,
                    speed: 350
                }
            },
            series: [
                {
                    height: 250,
                    type: 'radar',
                    tooltip: {
                        trigger: 'item'
                    },
                    areaStyle: {},
                    data: [
                        {
                            value: data,
                            name: starName,
                            label: {
                                show: true,
                                formatter: function (params) {
                                    return params.value;
                                }
                            }
                        }
                    ]
                }
            ]
        };
        echartsTodayLuck.setOption(luckOption);

        window.onresize = function () {
            echartsTodayLuck.resize();
        };

        /**
         * 系统公告点击事件
         */
        $("#systemNotice .list .list-item").on('click', function () {
            const id = $(this).val();
            const notices = [[${noticeInfo.noticeInfos}]];
            const notice = {};
            notices.forEach(function (data) {
                if (data.id === id) {
                    notice.title = data.title;
                    notice.content = data.content;
                }
            });
            window.notice(notice.title, notice.content);
        });
    });

</script>
</body>
</html>

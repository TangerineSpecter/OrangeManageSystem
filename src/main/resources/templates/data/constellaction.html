<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="./common/_common :: common_header">
<meta charset="utf-8">
</head>
<body>
	<div class="content-inner">
		<section class="tables">
			<div class="container-fluid">
				<div class="row">
					<div class="col-lg-12">
						<div class="card">
							<div class="card-header d-flex align-items-center">
								<h3 class="h4">星座数据列表</h3>
							</div>
							<div class="card-body">
								<div class="table-responsive">
									<form id="queryForm" method="post" action="/constellaction">
										<div class="form-group row-search">
											<div data-am-selected="{searchBox: 1}" class="col-sm-2">
												<select id="star" name="star" class="form-control mb-3">
												</select>
											</div>
											<div class="col-sm-2">
												<input id="queryDay" name="queryDay" type="text"
													class="form-control" placeholder="查询日期" readonly required>
											</div>
											<div class="col-sm-2">
												<button id="queryBtn" type="button" class="btn btn-primary">搜索</button>
											</div>
										</div>
									</form>
									<table class="table table-striped table-hover">
										<thead>
											<tr>
												<th>序号</th>
												<th>星座名称</th>
												<th>时间</th>
												<th>幸运色</th>
												<th>综合指数</th>
												<th>健康指数</th>
												<th>爱情指数</th>
												<th>财运指数</th>
												<th>工作指数</th>
												<th>幸运数字</th>
												<th>速配星座</th>
												<th>今日概述</th>
											</tr>
										</thead>
										<tbody>
											<tr class="gradeX" th:each="data:${list}">
												<td th:text="${dataStat.count}" />
												<td th:text="${data.name}" />
												<td th:text="${data.datetime}" />
												<td th:text="${data.color}" />
												<td th:text="${data.allLuck}" />
												<td th:text="${data.health}" />
												<td th:text="${data.love}" />
												<td th:text="${data.money}" />
												<td th:text="${data.workLuck}" />
												<td th:text="${data.number}" />
												<td th:text="${data.Qfriend}" />
												<td th:text="${data.summary}" />
											</tr>
										</tbody>
									</table>
									<div th:include="./common/_common :: pagination"></div>
									<!-- <div id="example" style="text-align: center">
										<ul id="pageLimit"></ul> -->
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</section>
	</div>
	<div th:replace="./common/_common::common_js"></div>
	<script src="./js/omsJs/data/constellaction.js"></script>
	<script>
		$('#pageLimit').bootstrapPaginator(
				{
					currentPage : 1,//当前的请求页面。
					totalPages : 20,//一共多少页。
					size : "normal",//应该是页眉的大小。
					bootstrapMajorVersion : 3,//bootstrap的版本要求。
					alignment : "right",
					numberOfPages : 5,//一页列出多少数据。
					itemTexts : function(type, page, current) {//如下的代码是将页眉显示的中文显示我们自定义的中文。
						switch (type) {
						case "first":
							return "首页";
						case "prev":
							return "上一页";
						case "next":
							return "下一页";
						case "last":
							return "末页";
						case "page":
							return page;
						}
					},
					onPageClicked : function(event, originalEvent, type, page) {//给每个页眉绑定一个事件，其实就是ajax请求，其中page变量为当前点击的页上的数字。
						$.ajax({
							url : '/constellaction',
							type : 'POST',
							data : {
								'page' : page,
								'size' : 10
							},
							dataType : 'JSON',
							success : function(callback) {
								$('tbody').empty();
								var page_count = callback.page_count;
								var page_cont = callback.page_content;
								$('tbody').append(page_cont);
								$('#last_page').text(page_count)
								// 将数据渲染到页面
								$("tbody").html(template("tableTemp", {
									item : result
								}))
								// 调用分页函数.参数:当前所在页, 总页数(用总条数 除以 每页显示多少条,在向上取整), ajax函数
								setPage(currentPage, Math.ceil(result[0].size
										/ pageSize), render)
							}
						})
					}
				});
	</script>
</body>
</html>
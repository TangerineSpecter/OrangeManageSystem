<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <th:block th:include="include :: header('首页')"/>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="../../admin/css/other/console1.css"/>
</head>
<body class="pear-container">
<div>
    <div class="layui-row layui-col-space10">
        <div class="layui-col-md9">
            <div class="layui-card">
                <div class="layui-card-header"><i class="fa fa-line-chart icon"></i>资金曲线</div>
                <div class="layui-card-body">
                    <div class="layui-tab custom-tab layui-tab-brief">
                        <div id="echarts-records" style="background-color:#ffffff;min-height:400px;padding: 10px"></div>
                    </div>
                </div>
            </div>
            <div class="layui-card">
                <div class="layui-card-header">动态</div>
                <div class="layui-card-body">
                    <dl class="layuiadmin-card-status">
                        <dd>
                            <div class="layui-status-img"><a href="javascript:;"><img
                                    style="width: 32px;height: 32px;border-radius: 50px;"
                                    src="../../admin/images/avatar.jpg"></a></div>
                            <div>
                                <p>七彩枫叶 在 <a class="pear-text" lay-href="https://gitee.com/Jmysy/Pear-Admin-Layui">Pear
                                    Admin 专区</a> 回答问题</p>
                                <span>几秒前</span>
                            </div>
                        </dd>
                    </dl>
                </div>
            </div>
        </div>
        <div class="layui-col-md3">
            <div class="layui-card">
                <div class="layui-card-header">系统公告</div>
                <div class="layui-card-body">
                    <ul class="list" th:each="noticeInfo:${noticeInfo.noticeInfos}">
                        <li class="list-item"><span class="title" th:text="${noticeInfo.title}">公告标题</span>&emsp;<span
                                class="layui-badge" th:if="${noticeInfo.top} == 1">置顶</span>
                            <span class="footer" th:text="${noticeInfo.createTime}">2022-01-01</span></li>
                    </ul>
                </div>
            </div>
            <div class="layui-card">
                <div class="layui-card-header"><i class="fa fa-fire icon"></i>今日运势</div>
                <div class="layui-card-body layui-text">
                    <div id="echarts-today-luck" style="width: 100%;min-height:500px"></div>
                </div>
            </div>
            <div class="layui-card">
                <div class="layui-card-header">
                    今日寄语
                </div>
                <div class="layui-card-body" style="line-height:40px;" th:text="${systemInfo.todayTip}">
                </div>
            </div>
            <div class="layui-card">
                <div class="layui-card-header"><i class="fa fa-fire icon"></i>系统信息</div>
                <div class="layui-card-body layui-text">
                    <table class="layui-table">
                        <colgroup>
                            <col width="100">
                            <col>
                        </colgroup>
                        <tbody>
                        <tr>
                            <td>系统名称</td>
                            <td th:text="${systemInfo.systemTitle}">
                                橘子管理系统
                            </td>
                        </tr>
                        <tr>
                            <td>当前版本</td>
                            <td th:text="${systemInfo.version}">v0.0.1</td>
                        </tr>
                        <tr>
                            <td>当前系统</td>
                            <td th:text="${systemInfo.osName}">
                            </td>
                        </tr>
                        <tr>
                            <td>Github</td>
                            <td style="padding-bottom: 0;">
                                <div class="layui-btn-container">
                                    <iframe src="https://ghbtns.com/github-btn.html?user=TangerineSpecter&repo=OrangeManageSystem&type=star&count=true"
                                            frameborder="0" scrolling="0" width="100px" height="20px"></iframe>
                                    <iframe src="https://ghbtns.com/github-btn.html?user=TangerineSpecter&repo=OrangeManageSystem&type=fork&count=true"
                                            frameborder="0" scrolling="0" width="100px" height="20px"></iframe>
                                </div>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
<th:block th:include="include :: footer"/>
<script th:inline="javascript">

    layui.use(['layer', 'echarts', 'element', 'count'], function () {
        const $ = layui.jquery,
            layer = layui.layer,
            element = layui.element,
            count = layui.count,
            echarts = layui.echarts;

        const echartsRecords = echarts.init(document.getElementById('echarts-records'), 'walden');

        const totalMoney = [[${statisticsInfo.lastThirtyTotalMoney}]];
        const lastDate = [[${statisticsInfo.lastThirtyDate}]];

        const option = {
            tooltip: {
                trigger: 'axis'
            },
            xAxis: [{
                type: 'category',
                data: lastDate.split(","),
                axisLine: {
                    lineStyle: {
                        color: "#999"
                    }
                }
            }],
            yAxis: [{
                type: 'value',
                splitNumber: 4,
                splitLine: {
                    lineStyle: {
                        type: 'dashed',
                        color: '#DDD'
                    }
                },
                axisLine: {
                    show: false,
                    lineStyle: {
                        color: "#333"
                    },
                },
                nameTextStyle: {
                    color: "#999"
                },
                splitArea: {
                    show: false
                }
            }],
            series: [{
                name: '当前资金',
                type: 'line',
                data: totalMoney.split(","),
                lineStyle: {
                    width: 6,
                    color: {
                        type: 'linear',
                        colorStops: [{
                            offset: 0,
                            color: '#A9F387' // 0% 处的颜色
                        }, {
                            offset: 1,
                            color: '#48D8BF' // 100% 处的颜色
                        }],
                        globalCoord: false // 缺省为 false
                    },
                    shadowColor: 'rgba(72,216,191, 0.3)',
                    shadowBlur: 10,
                    shadowOffsetY: 20
                },
                itemStyle: {
                    color: '#fff',
                    borderWidth: 5,
                    /*shadowColor: 'rgba(72,216,191, 0.3)',
                    shadowBlur: 100,*/
                    borderColor: "#A9F387"
                },
                smooth: true
            }]
        };
        echartsRecords.setOption(option);

        window.onresize = function () {
            echartsRecords.resize();
        };

        /**
         * 今日运势图表
         */
        const echartsTodayLuck = echarts.init(document.getElementById('echarts-today-luck'), 'walden');

        /**
         * 今日运势初始化
         */
        const starName = [[${systemInfo.starName}]];
        const allLuck = [[${systemInfo.allLuck}]];
        const workLuck = [[${systemInfo.workLuck}]];
        const love = [[${systemInfo.love}]];
        const health = [[${systemInfo.health}]];
        const money = [[${systemInfo.money}]];
        //综合运势、爱情、工作、健康、金钱
        const data = [allLuck, love, workLuck, health, money];

        //今日运势
        const luckOption = {
            tooltip: {
                trigger: 'axis'
            },
            legend: {
                left: 'center'
            },
            radar: [
                {
                    indicator: [
                        {text: '综合运势', max: 100},
                        {text: '爱情运势', max: 100},
                        {text: '工作运势', max: 100},
                        {text: '健康运势', max: 100},
                        {text: '金钱运势', max: 100}
                    ],
                    center: ['50%', '50%'],
                    radius: 150
                }
            ],
            animations: {
                enabled: true,
                easing: 'easeinout',
                speed: 800,
                animateGradually: {
                    enabled: true,
                    delay: 150
                },
                dynamicAnimation: {
                    enabled: true,
                    speed: 350
                }
            },
            series: [
                {
                    height: 350,
                    type: 'radar',
                    tooltip: {
                        trigger: 'item'
                    },
                    areaStyle: {},
                    data: [
                        {
                            value: data,
                            name: starName,
                            label: {
                                show: true,
                                formatter: function (params) {
                                    return params.value;
                                }
                            }
                        }
                    ]
                }
            ]
        };
        echartsTodayLuck.setOption(luckOption);

        window.onresize = function () {
            echartsTodayLuck.resize();
        };

    });
</script>
</body>
</html>
